<script>
function setGiscusTheme(themeUrl) {
  const iframe = document.querySelector('iframe.giscus-frame');
  if (!iframe) return;
  iframe.contentWindow.postMessage({
    giscus: {
      setConfig: { theme: themeUrl }
    }
  }, 'https://giscus.app');
}

function updateGiscusTheme() {
  var isDark = document.documentElement.classList.contains("dark");
  var theme = isDark
    ? "catppuccin_mocha"
    : "catppuccin_latte";
  setGiscusTheme(theme);
}

// Run after window load to make sure iframe is present
window.addEventListener("load", () => {
  setTimeout(updateGiscusTheme, 100);
  
  const observer = new MutationObserver(updateGiscusTheme);
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ["class"]
  });
});
</script>
